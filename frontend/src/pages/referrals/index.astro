---
import GridLayout from '../../layouts/GridLayout.astro';
import ProfileCard from '../../components/ProfileCard.astro';
import { getSectionBySlug } from '../../lib/sections';
import { getDataFile } from '../../lib/content';

interface Person {
  name: string;
  title: string;
  description?: string;
  banner?: string;
  links?: Array<{ type: string; url: string }>;
  order?: number;
}

const section = getSectionBySlug('referrals');
const people = getDataFile<Person>('referrals', 'people.yaml').sort((a, b) => (a.order || 99) - (b.order || 99));

if (!section) {
  return Astro.redirect('/404');
}
---

<GridLayout title={section.name} description={section.description}>
  {people.map(person => (
    <ProfileCard
      name={person.name}
      title={person.title}
      description={person.description}
      banner={person.banner}
      links={person.links}
    />
  ))}
</GridLayout>