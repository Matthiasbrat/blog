---
import BaseLayout from '../../layouts/BaseLayout.astro';
import ProfileCard from '../../components/ProfileCard.astro';
import { getSectionBySlug } from '../../lib/sections';
import { getDataFile } from '../../lib/content';

interface Person {
  name: string;
  title: string;
  description?: string;
  links?: Array<{ type: string; url: string }>;
  order?: number;
}

const section = getSectionBySlug('referrals');
const people = getDataFile<Person>('referrals', 'people.yaml').sort((a, b) => (a.order || 99) - (b.order || 99));
---

<BaseLayout title="People" description={section?.description}>
  <header>
    <h1>People</h1>
    <p class="description">{section?.description}</p>
  </header>
  
  <ul class="person-list">
    {people.map(person => (
      <ProfileCard
        name={person.name}
        title={person.title}
        description={person.description}
        links={person.links}
      />
    ))}
  </ul>
</BaseLayout>

<style>
  .description {
    font-size: 1.125rem;
    color: var(--color-text-light);
    margin-top: calc(var(--space-xl) * -1 + var(--space-md));
    margin-bottom: var(--space-2xl);
  }
</style>
