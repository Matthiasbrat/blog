---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getSectionBySlug } from '../../lib/sections';
import { getFlatContent } from '../../lib/content';

const section = getSectionBySlug('projects');
const projects = getFlatContent('projects');

const projectStyles: Record<string, { icon: string; color: string }> = {
  'personal-website': { icon: 'ğŸŒ', color: 'var(--pastel-green)' },
  'cli-tool': { icon: 'âš™ï¸', color: 'var(--pastel-purple)' },
  'task-manager': { icon: 'âœ…', color: 'var(--pastel-blue)' },
  'weather-dashboard': { icon: 'ğŸŒ¤ï¸', color: 'var(--pastel-orange)' },
};
---

<BaseLayout title="Projects" description={section?.description}>
  <div class="page-header container-narrow">
    <div class="page-header-icon">ğŸ› ï¸</div>
    <h1>Projects</h1>
    <p class="page-header-description">{section?.description}</p>
  </div>
  
  <hr class="decorated">
  
  <section class="section" style="padding-top: 0;">
    <div class="container-narrow">
      <ul class="cards-grid" style="max-width: 700px; margin: 0 auto;">
        {projects.map(project => {
          const style = projectStyles[project.slug] || { icon: 'ğŸ“¦', color: 'var(--pastel-green)' };
          return (
            <li>
              <a href={`/projects/${project.slug}`} class="topic-card" style={`--card-accent: ${style.color}`}>
                <div class="topic-card-icon">{style.icon}</div>
                <h3>{project.title}</h3>
                <p class="topic-card-description">{project.description}</p>
                <div class="topic-card-meta">
                  <span class="topic-card-count">View project â†’</span>
                </div>
              </a>
            </li>
          );
        })}
      </ul>
    </div>
  </section>
</BaseLayout>
