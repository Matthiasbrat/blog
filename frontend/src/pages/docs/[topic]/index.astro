---
import BaseLayout from '../../../layouts/ListLayout.astro';
import PostItem from '../../../components/PostItem.astro';
import { getTopicBySlug, getContentForTopic } from '../../../lib/content';

export async function getStaticPaths() {
  const { getTopicsForSection } = await import('../../../lib/content');
  const topics = getTopicsForSection('docs');
  
  return topics.map(topic => ({
    params: { topic: topic.slug }
  }));
}

const { topic: topicSlug } = Astro.params;
const topic = getTopicBySlug('docs', topicSlug!);
const docs = getContentForTopic('docs', topicSlug!);
---

<BaseLayout title={topic?.name || topicSlug} description={topic?.description}>
  <ul class="docs">
    {docs.map(doc => (
      <PostItem 
        title={doc.title} 
        href={`/docs/${topicSlug}/${doc.slug}`}
      />
    ))}
  </ul>
  
  <p class="back"><a href="/docs">‚Üê All topics</a></p>
</BaseLayout>

<style>
  .docs {
    margin-bottom: var(--space-xl);
  }
  
  .back {
    font-size: 0.9375rem;
  }
  
  .back a {
    color: var(--color-text-muted);
  }
</style>
