---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getSectionBySlug } from '../../lib/sections';
import { getTopicsForSection, getContentForTopic } from '../../lib/content';

const section = getSectionBySlug('docs');
const topics = getTopicsForSection('docs');

const topicStyles: Record<string, { icon: string; color: string }> = {
  'getting-started': { icon: 'ðŸš€', color: 'var(--pastel-green)' },
  'advanced': { icon: 'ðŸŽ¯', color: 'var(--pastel-purple)' },
};
---

<BaseLayout title="Documentation" description={section?.description}>
  <div class="page-header container-narrow">
    <div class="page-header-icon">ðŸ“š</div>
    <h1>Documentation</h1>
    <p class="page-header-description">{section?.description}</p>
  </div>
  
  <hr class="decorated">
  
  <section class="section" style="padding-top: 0;">
    <div class="container-narrow">
      <ul class="cards-grid" style="max-width: 700px; margin: 0 auto;">
        {topics.map(topic => {
          const docs = getContentForTopic('docs', topic.slug);
          const style = topicStyles[topic.slug] || { icon: 'ðŸ“–', color: 'var(--pastel-blue)' };
          return (
            <li>
              <a href={`/docs/${topic.slug}`} class="topic-card" style={`--card-accent: ${style.color}`}>
                <div class="topic-card-icon">{style.icon}</div>
                <h3>{topic.name}</h3>
                <p class="topic-card-description">{topic.description}</p>
                <div class="topic-card-meta">
                  <span class="topic-card-count">{docs.length} docs â†’</span>
                </div>
              </a>
            </li>
          );
        })}
      </ul>
    </div>
  </section>
</BaseLayout>
