---
import BaseLayout from '../../layouts/BaseLayout.astro';
import TopicCard from '../../components/TopicCard.astro';
import { getSectionBySlug } from '../../lib/sections';
import { getTopicsForSection, getContentForTopic } from '../../lib/content';

const section = getSectionBySlug('docs');
const topics = getTopicsForSection('docs');
---

<BaseLayout title="Documentation" description={section?.description}>
  <h1>Documentation</h1>
  <p class="description">{section?.description}</p>
  
  <h2>Topics</h2>
  <ul class="topics">
    {topics.map(topic => {
      const docs = getContentForTopic('docs', topic.slug);
      return (
        <TopicCard
          title={topic.name}
          description={topic.description}
          href={`/docs/${topic.slug}`}
          count={docs.length}
        />
      );
    })}
  </ul>
</BaseLayout>

<style>
  .description {
    color: var(--color-text-muted);
    margin-bottom: var(--space-xl);
  }
  
  h2 {
    border-bottom: 1px solid var(--color-border);
    padding-bottom: var(--space-xs);
    margin-bottom: var(--space-lg);
  }
</style>
