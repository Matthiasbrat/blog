---
import { getSiteConfig } from '../lib/sections';

interface Props {
  enabled?: boolean;
}

const { enabled = true } = Astro.props;

if (!enabled) {
  return null;
}

const siteConfig = getSiteConfig();
const comments = siteConfig.comments;

// Only render if Giscus is configured
if (!comments || comments.provider !== 'giscus' || !comments.repo) {
  return null;
}
---

<div class="giscus-container">
  <script 
    src="https://giscus.app/client.js"
    data-repo={comments.repo}
    data-repo-id={comments.repoId}
    data-category={comments.category}
    data-category-id={comments.categoryId}
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="light"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async>
  </script>
</div>

<style>
  .giscus-container {
    margin-top: var(--space-3xl);
    padding-top: var(--space-2xl);
    border-top: 1px solid var(--border);
  }
</style>
